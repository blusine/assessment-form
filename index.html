<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>APRISE Learning Registration</title>
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Proxima+Nova:wght@600&display=swap" rel="stylesheet">

<style>
    body {
        font-family: 'Open Sans', sans-serif;
        background-color: #FBF5F5;
        margin: 0;
        padding: 0;
    }
    .form-container {
        max-width: 800px;
        margin: 40px auto;
        background: white;
        border: 1px solid #ddd;
        padding: 30px 40px;
        border-radius: 6px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    }
    h2 {
        font-family: 'Proxima Nova', sans-serif;
        font-size: 1.2rem;
        margin-bottom: 8px;
        color: #333;
        border-bottom: 2px solid #E2C4C4;
        padding-bottom: 5px;
    }
    label {
        font-weight: 600;
        font-size: 0.9rem;
        display: block;
        margin-bottom: 4px;
        margin-top: 15px;
    }
    input[type="text"], input[type="email"], select, input[type="tel"], input[type="date"] {
        width: 100%;
        padding: 10px;
        font-size: 0.9rem;
        border: 1px solid #ccc;
        border-radius: 4px;
    }
    .form-row {
        display: flex;
        gap: 15px;
    }
    .form-row .form-group {
        flex: 1;
    }
    .checkbox-group {
        display: flex;
        flex-direction: column;
        gap: 5px;
        margin-top: 5px;
    }
    .checkbox-group label {
        font-weight: normal;
        display: flex;
        align-items: center;
    }
    .btn-submit {
        background-color: #8C3A3A;
        color: white;
        border: none;
        padding: 12px 24px;
        font-size: 1rem;
        border-radius: 4px;
        cursor: pointer;
        margin-top: 20px;
    }
    .btn-submit:hover {
        background-color: #732f2f;
    }
    .time-slot-btn {
        padding: 8px 14px;
        margin: 4px;
        border: 1px solid #8C3A3A;
        background: white;
        color: #8C3A3A;
        cursor: pointer;
        border-radius: 4px;
        font-size: 0.9rem;
    }
    .time-slot-btn.selected {
        background: #8C3A3A;
        color: white;
    }
    .error {
        color: red;
        font-size: 0.85rem;
        margin-top: 3px;
    }
</style>
</head>
<body>

<div class="form-container">
<form id="apriseForm">
    <!-- Parent/Guardian Info -->
    <h2>Parent/Guardian Information <span style="color:red;">*</span></h2>
    <div class="form-row">
        <div class="form-group">
            <label>First Name</label>
            <input type="text" name="parentFirstName" required>
        </div>
        <div class="form-group">
            <label>Last Name</label>
            <input type="text" name="parentLastName" required>
        </div>
    </div>
    <label>Email</label>
    <input type="email" name="parentEmail" required>
    <label>Phone</label>
    <input type="tel" name="parentPhone" required>

    <!-- Student Info -->
    <h2>Student Information <span style="color:red;">*</span></h2>
    <div class="form-row">
        <div class="form-group">
            <label>First Name</label>
            <input type="text" name="studentFirstName" required>
        </div>
        <div class="form-group">
            <label>Last Name</label>
            <input type="text" name="studentLastName" required>
        </div>
    </div>
    <label>Student Email (for class communication)</label>
    <input type="email" name="studentEmail" required>
    <label>Current/Rising Grade or Math Level</label>
    <select name="gradeLevel" required>
        <option value="">Select an option</option>
        <option>K</option>
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
        <option>6</option>
        <option>7</option>
        <option>8</option>
        <option>9</option>
        <option>10</option>
        <option>11</option>
        <option>12</option>
    </select>

    <!-- How did you hear -->
    <h2>How Did You Hear About Us? <span style="color:red;">*</span></h2>
    <div class="checkbox-group" id="hearAboutUs">
        <label><input type="checkbox" name="hear[]" value="Friend or Current Student"> Friend or Current Student</label>
        <label><input type="checkbox" name="hear[]" value="Facebook, Instagram, YouTube"> Facebook, Instagram, YouTube</label>
        <label><input type="checkbox" name="hear[]" value="Google or Bing Search"> Google or Bing Search</label>
        <label><input type="checkbox" name="hear[]" value="School Ads"> School Ads</label>
        <label><input type="checkbox" name="hear[]" value="Other"> Other</label>
    </div>
    <div class="error" id="hearError" style="display:none;">Please select at least one option.</div>

    <!-- Preferred Date -->
    <h2>Date <span style="color:red;">*</span></h2>
    <input type="date" name="preferredDate" required>

    <!-- Preferred Time -->
    <h2>Preferred Time <span style="color:red;">*</span></h2>
    <div id="timeSlots"></div>
    <input type="hidden" name="preferredTime" id="preferredTime" required>
    <div class="error" id="timeError" style="display:none;">Please select a time slot.</div>

    <button type="submit" class="btn-submit">Register</button>
</form>
</div>

<script>
const form = document.getElementById('apriseForm');
form.addEventListener('submit', async (e) => {
    e.preventDefault();

    // Checkbox validation
    const checkboxes = document.querySelectorAll('#hearAboutUs input[type="checkbox"]');
    const isChecked = Array.from(checkboxes).some(cb => cb.checked);
    if (!isChecked) {
        document.getElementById('hearError').style.display = 'block';
        return;
    } else {
        document.getElementById('hearError').style.display = 'none';
    }

    // Time slot validation
    if (!document.getElementById('preferredTime').value) {
        document.getElementById('timeError').style.display = 'block';
        return;
    } else {
        document.getElementById('timeError').style.display = 'none';
    }

    try {
        const formData = new FormData(form);
        const response = await fetch('https://script.google.com/macros/s/AKfycbw1JFckUEHppkQ43mYt9UKUAg4BAbClYfWqXyn9N4riSmDGcme20CReZxKvBWvW6dbJew/exec', {
            method: 'POST',
            body: formData
        });
        const result = await response.json();
        alert(result.message || 'Form submitted successfully!');
        form.reset();
    } catch (err) {
        alert('There was a problem submitting the form. Please try again.');
    }
});

// Example: Time slot rendering
const timeSlotsContainer = document.getElementById('timeSlots');
['10:00 AM', '10:30 AM', '11:00 AM', '11:30 AM', '12:00 PM'].forEach(slot => {
    const btn = document.createElement('button');
    btn.type = 'button';
    btn.classList.add('time-slot-btn');
    btn.textContent = slot;
    btn.onclick = () => {
        document.querySelectorAll('.time-slot-btn').forEach(b => b.classList.remove('selected'));
        btn.classList.add('selected');
        document.getElementById('preferredTime').value = slot;
    };
    timeSlotsContainer.appendChild(btn);
});
</script>

</body>
</html>
